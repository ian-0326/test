<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>K-TRIP MATE Prototype</title>
  <!-- é–å®šç¸®æ”¾ -->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
  />

  <style>
    /* ========================
       åŸºç¤éŸ“ç³»æ¥µç°¡ä¸»é¡Œï¼ˆéœ§é¢é£¯åº—æ„Ÿï¼‰
    ========================= */
    :root {
      --bg: #f1f2f4;
      --bg-soft: #eef0f3;
      --card-bg: rgba(255, 255, 255, 0.96);
      --card-border: rgba(209, 213, 219, 0.7);
      --primary: #1f2933;
      --primary-soft: rgba(31, 41, 51, 0.06);
      --accent: #c6a98b;        /* æº«æš–æ²™è‰²é»ç¶´ */
      --accent-soft: rgba(198, 169, 139, 0.12);
      --text-main: #111827;
      --text-sub: #8b9098;
      --shadow-soft: 0 18px 40px rgba(15, 23, 42, 0.09);
      --radius-card: 24px;
      --radius-pill: 999px;
      --radius-btn: 999px;
    }

    /* ç¬¬äºŒå¥—è‰²ï¼šåç´«ç°ï¼ˆåƒ Moments å€ï¼‰ */
    :root[data-theme="lilac"] {
      --bg: #f4f3f7;
      --bg-soft: #ecebf3;
      --card-bg: rgba(255, 255, 255, 0.97);
      --card-border: rgba(209, 213, 219, 0.7);
      --primary: #1f2233;
      --primary-soft: rgba(31, 34, 51, 0.06);
      --accent: #b9a3df;
      --accent-soft: rgba(185, 163, 223, 0.14);
      --text-main: #111827;
      --text-sub: #9295a3;
      --shadow-soft: 0 18px 42px rgba(26, 32, 56, 0.16);
    }

    /* å¤œé–“ï¼šæ·±ç°ï¼‹é¦™æª³é‡‘ */
    :root[data-theme="midnight"] {
      --bg: #101119;
      --bg-soft: #161822;
      --card-bg: rgba(19, 20, 30, 0.98);
      --card-border: rgba(55, 65, 81, 0.9);
      --primary: #f0d59f;
      --primary-soft: rgba(240, 213, 159, 0.08);
      --accent: #f0d59f;
      --accent-soft: rgba(240, 213, 159, 0.1);
      --text-main: #f9fafb;
      --text-sub: #9ca3af;
      --shadow-soft: 0 22px 52px rgba(0, 0, 0, 0.72);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Pretendard", "Noto Sans KR", "Noto Sans TC", system-ui, sans-serif;
      background: radial-gradient(circle at top left, #f9fafb 0, var(--bg-soft) 36%, var(--bg) 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding-bottom: 64px; /* çµ¦åº•éƒ¨åœ“è§’ bar ç©ºé–“ */
      position: relative;
    }

    /* ========================
       Header å€å¡Š
    ========================= */
    .app-header {
      padding: 12px 20px 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(20px);
      background: linear-gradient(
        to bottom,
        color-mix(in srgb, var(--bg) 90%, transparent),
        color-mix(in srgb, var(--bg) 78%, transparent) 70%,
        transparent
      );
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .brand-primary {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .brand-logo {
      font-size: 18px;
    }

    .brand-title {
      font-family: "SF Pro Display", "Times New Roman", serif;
      font-size: 17px;
      letter-spacing: 0.24em;
      text-transform: uppercase;
    }

    .brand-sub {
      font-size: 11px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-sub);
    }

    .header-right {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .status-pill {
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      background: rgba(34, 197, 94, 0.08);
      color: #16a34a;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      border: 1px solid rgba(22, 163, 74, 0.18);
    }

    .status-pill span {
      font-size: 13px;
    }

    .icon-btn {
      border: none;
      background: color-mix(in srgb, var(--card-bg) 80%, transparent);
      border-radius: 999px;
      padding: 6px 11px;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 11px;
      color: var(--text-main);
      border: 1px solid rgba(148, 163, 184, 0.3);
    }

    .icon-btn span {
      font-size: 15px;
    }

    /* ========================
       ä¸Šæ–¹ Tabï¼šæ”¹æˆç´°ç·šéŸ“ç³»
    ========================= */
    .top-tabs {
      display: flex;
      justify-content: center;
      gap: 26px;
      font-size: 12px;
      padding: 6px 0 8px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.18);
      position: sticky;
      top: 52px;
      z-index: 19;
      backdrop-filter: blur(14px);
      background: color-mix(in srgb, var(--bg) 92%, transparent);
    }

    .top-tab {
      position: relative;
      padding-bottom: 6px;
      color: var(--text-sub);
      cursor: pointer;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .top-tab.active {
      color: var(--text-main);
      font-weight: 500;
    }

    .top-tab.active::after {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: 0;
      width: 22px;
      height: 2px;
      border-radius: 999px;
      background: var(--accent);
    }

    /* ========================
       ä¸»å…§å®¹èˆ‡å¡ç‰‡
    ========================= */
    main {
      flex: 1;
      padding: 14px 18px 24px;
    }

    .page {
      display: none;
      animation: fadeIn 0.2s ease-out;
    }

    .page.active {
      display: block;
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-card);
      padding: 18px 18px 16px;
      margin: 10px 0;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--card-border);
    }

    .card-hero {
      padding-top: 20px;
      padding-bottom: 20px;
    }

    .sub-text {
      font-size: 11px;
      color: var(--text-sub);
    }

    .btn-primary {
      border-radius: var(--radius-btn);
      border: none;
      background: var(--primary);
      color: #fff;
      padding: 10px 20px;
      font-size: 13px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.35);
    }

    .btn-ghost {
      border-radius: var(--radius-btn);
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: transparent;
      padding: 8px 16px;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-main);
      background: color-mix(in srgb, var(--bg) 80%, transparent);
    }

    .pill-outline {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.35);
      padding: 6px 11px;
      font-size: 11px;
      background: color-mix(in srgb, var(--bg-soft) 70%, var(--card-bg) 30%);
      color: var(--text-sub);
    }

    .pill-outline.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--text-main);
      font-weight: 500;
    }

    .pill-outline.small {
      padding: 4px 12px;
      font-size: 11px;
    }

    /* ========================
       åŒ¯ç‡è©¦ç®—å¡æ¨£å¼
    ========================= */
    .rate-title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 10px;
    }

    .rate-title-left {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .rate-title-main {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .rate-subtitle {
      font-size: 11px;
      color: var(--text-sub);
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }

    .rate-icon.icon-calc {
      width: 28px;
      height: 28px;
      border-radius: 10px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      position: relative;
      background: radial-gradient(circle at top left, #ffffff 0, #f3f4f6 60%);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
    }
    .rate-icon.icon-calc::before,
    .rate-icon.icon-calc::after {
      content: "";
      position: absolute;
      left: 6px;
      right: 6px;
      border-top: 1px solid rgba(209, 213, 219, 0.9);
    }
    .rate-icon.icon-calc::before {
      top: 9px;
    }
    .rate-icon.icon-calc::after {
      bottom: 8px;
    }

    /* æ¨¡å¼ switchï¼ˆå³ä¸Šè§’ï¼‰ */
    .rate-switch {
      position: relative;
      display: inline-flex;
      align-items: center;
      cursor: pointer;
    }

    .rate-switch input {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .rate-switch-track {
      position: relative;
      width: 82px;
      height: 26px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.06);
      transition: background 0.18s ease;
      overflow: hidden;
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .rate-switch-thumb {
      position: absolute;
      top: 3px;
      left: 3px;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: #ffffff;
      box-shadow: 0 3px 10px rgba(15, 23, 42, 0.25);
      transition: transform 0.18s ease;
    }

    .rate-switch-label {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 10px;
      color: rgba(255, 255, 255, 0.9);
      pointer-events: none;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      opacity: 0;
      transition: opacity 0.15s ease;
    }

    .rate-switch-label-left {
      left: 10px;
      text-align: left;
    }

    .rate-switch-label-right {
      right: 10px;
      text-align: right;
    }

    .rate-switch input:checked + .rate-switch-track {
      background: var(--primary);
    }

    .rate-switch input:checked + .rate-switch-track .rate-switch-thumb {
      transform: translateX(48px);
    }

    .rate-body {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 6px 0 10px;
      gap: 10px;
    }

    .rate-col {
      flex: 1;
    }

    .rate-label {
      font-size: 11px;
      color: var(--text-sub);
      margin-bottom: 4px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .rate-equal {
      width: 40px;
      text-align: center;
      font-size: 20px;
      color: var(--text-sub);
    }

    .rate-line {
      margin-top: 4px;
      height: 1px;
      width: 100%;
      background: rgba(209, 213, 219, 0.9);
    }

    .rate-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 8px;
      font-size: 11px;
      gap: 10px;
    }

    .rate-input-field {
      width: 100%;
      border: none;
      outline: none;
      background: transparent;
      font-size: 26px;
      color: var(--text-main);
      padding: 4px 0;
      font-weight: 500;
      letter-spacing: 0.02em;
    }
    .rate-input-field::-webkit-outer-spin-button,
    .rate-input-field::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .rate-input-right {
      text-align: right;
    }

    .custom-rate-row {
      display: none;
      align-items: center;
      gap: 6px;
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-sub);
    }

    .custom-rate-row input {
      width: 90px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 4px 10px;
      font-size: 11px;
      background: color-mix(in srgb, var(--bg-soft) 70%, var(--card-bg) 30%);
      color: var(--text-main);
    }

    /* ========================
       å¤©æ°£å¡ ï¼‹ Segment
    ========================= */
    .weather-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 13px;
    }

    .weather-header-title {
      font-size: 13px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .weather-row {
      display: flex;
      justify-content: space-between;
      text-align: center;
      font-size: 12px;
      min-height: 64px;
    }

    .weather-day {
      flex: 1;
    }

    .weather-icon {
      font-size: 18px;
      margin-bottom: 2px;
    }

    .weather-temp {
      margin-top: 2px;
      font-size: 13px;
    }

    .segment-wrap {
      margin-top: 16px;
      display: flex;
      justify-content: center;
    }

    .segment {
      background: color-mix(in srgb, var(--card-bg) 90%, var(--bg-soft) 10%);
      border-radius: 999px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(209, 213, 219, 0.8);
      display: flex;
      overflow: hidden;
      width: 100%;
      max-width: 380px;
    }

    .segment-btn {
      flex: 1;
      border: none;
      padding: 11px 8px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      background: transparent;
      color: var(--text-sub);
    }

    .segment-btn.active {
      background: rgba(17, 24, 39, 0.95);
      color: #f9fafb;
      font-weight: 500;
    }

    /* ========================
       Visit Japan Web å¡
    ========================= */
    .vjw-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      font-size: 14px;
    }

    .vjw-left {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .qr-box {
      width: 28px;
      height: 28px;
      border-radius: 10px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      background: radial-gradient(circle at top left, #ffffff 0, #f3f4f6 60%);
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.12);
    }

    .vjw-members {
      display: flex;
      gap: 6px;
    }

    .vjw-pill {
      border-radius: 999px;
      padding: 4px 12px;
      font-size: 12px;
      border: 1px solid rgba(209, 213, 219, 0.95);
      background: color-mix(in srgb, var(--bg-soft) 60%, var(--card-bg) 40%);
      color: var(--text-sub);
    }

    .vjw-pill.active {
      background: var(--primary-soft);
      border-color: var(--primary);
      color: var(--text-main);
      font-weight: 500;
    }

    .vjw-placeholder {
      border-radius: 18px;
      border: 1px dashed rgba(209, 213, 219, 0.9);
      height: 112px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: var(--text-sub);
      background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--bg-soft) 70%, white 30%),
        color-mix(in srgb, var(--bg) 80%, white 20%)
      );
    }

    /* ========================
       å…¶ä»–åˆ†é ï¼ˆè¡Œç¨‹ / è¨˜å¸³ / æ¸…å–®ï¼‰
    ========================= */
    .section-title {
      font-size: 12px;
      margin: 8px 4px 4px;
      color: var(--text-sub);
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }

    .date-strip {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
      margin: 4px 0 10px;
    }

    .date-pill {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 12px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      background: color-mix(in srgb, var(--bg-soft) 70%, var(--card-bg) 30%);
      color: var(--text-sub);
      white-space: nowrap;
    }

    .date-pill.active {
      background: var(--primary);
      color: #f9fafb;
      border-color: var(--primary);
      font-weight: 500;
    }

    .tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin: 6px 0 10px;
    }

    .tag {
      border-radius: 999px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      padding: 4px 10px;
      font-size: 11px;
      color: var(--text-sub);
      background: color-mix(in srgb, var(--bg-soft) 60%, var(--card-bg) 40%);
    }

    .card-actions-row {
      display: flex;
      gap: 10px;
      margin-top: 6px;
      flex-wrap: wrap;
    }

    .chip-grid {
      display: flex;
      gap: 10px;
      margin: 10px 0 6px;
      flex-wrap: wrap;
    }

    .chip-icon {
      flex: 1;
      min-width: 80px;
      text-align: center;
      padding: 10px 4px;
      border-radius: 18px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      font-size: 11px;
      color: var(--text-sub);
      background: color-mix(in srgb, var(--bg-soft) 60%, var(--card-bg) 40%);
    }

    .chip-icon.active {
      border-color: var(--accent);
      background: var(--accent-soft);
      color: var(--text-main);
      font-weight: 500;
    }

    .input-row {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .input-label {
      font-size: 11px;
      color: var(--text-sub);
    }

    .input-field {
      border-radius: 14px;
      border: 1px solid rgba(209, 213, 219, 0.9);
      padding: 9px 12px;
      font-size: 13px;
      width: 100%;
      background: color-mix(in srgb, var(--bg-soft) 70%, var(--card-bg) 30%);
      color: var(--text-main);
    }

    .two-col {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .pill-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    .summary-bar {
      margin-top: 12px;
      border-radius: 16px;
      padding: 9px 12px;
      font-size: 12px;
      background: var(--accent-soft);
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .summary-bar span {
      font-size: 16px;
    }

    .progress-track {
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: rgba(209, 213, 219, 0.8);
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      width: 72%;
      background: var(--accent);
    }

    .group-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 13px;
      margin-bottom: 8px;
    }

    .checklist {
      margin-top: 4px;
      font-size: 13px;
    }

    .check-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin: 4px 0;
    }

    .check-item input {
      width: 16px;
      height: 16px;
      accent-color: var(--primary);
    }

    /* ========================
       åº•éƒ¨åœ“è§’ Navï¼ˆéŸ“å¼ï¼‰
    ========================= */
    .bottom-nav-wrap {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 480px;
      padding: 0 18px;
      z-index: 30;
      pointer-events: none;
    }

    .bottom-nav {
      pointer-events: auto;
      background: color-mix(in srgb, var(--card-bg) 90%, var(--bg-soft) 10%);
      border-radius: 999px;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.22);
      border: 1px solid rgba(209, 213, 219, 0.9);
      display: flex;
      justify-content: space-around;
      padding: 8px 14px;
    }

    .bottom-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      font-size: 10px;
      color: var(--text-sub);
    }

    .bottom-item-icon {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 17px;
      background: transparent;
    }

    .bottom-item.active .bottom-item-icon {
      background: var(--primary);
      color: #f9fafb;
    }

    .bottom-item.active {
      color: var(--text-main);
      font-weight: 500;
    }

    /* å‹•ç•« */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @media (prefers-color-scheme: dark) {
      :root:not([data-theme]) {
        --bg: #101119;
        --bg-soft: #161822;
        --card-bg: rgba(19, 20, 30, 0.98);
        --card-border: rgba(55, 65, 81, 0.9);
        --primary: #f0d59f;
        --primary-soft: rgba(240, 213, 159, 0.08);
        --accent: #f0d59f;
        --accent-soft: rgba(240, 213, 159, 0.1);
        --text-main: #f9fafb;
        --text-sub: #9ca3af;
        --shadow-soft: 0 22px 52px rgba(0, 0, 0, 0.72);
      }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- Header -->
    <header class="app-header">
      <div class="brand">
        <div class="brand-primary">
          <div class="brand-logo">ğŸ™ï¸</div>
          <div class="brand-title">Kâ€“TRIP</div>
        </div>
        <div class="brand-sub">SEOUL JOURNEY PLANNER</div>
      </div>
      <div class="header-right">
        <div class="status-pill">
          <span>âœ…</span> å·²è‡ªå‹•å„²å­˜
        </div>
        <button class="icon-btn" id="themeBtn">
          <span>ğŸ¨</span> PALETTE
        </button>
      </div>
    </header>

    <!-- ä¸Šæ–¹åˆ†é  -->
    <div class="top-tabs">
      <div class="top-tab active" data-tab="home">é¦–é </div>
      <div class="top-tab" data-tab="trip">è¡Œç¨‹</div>
      <div class="top-tab" data-tab="money">è¨˜å¸³</div>
      <div class="top-tab" data-tab="list">æ¸…å–®</div>
    </div>

    <main>
      <!-- é¦–é  Page -->
      <section class="page active" id="page-home">
        <!-- åŒ¯ç‡è©¦ç®— -->
        <div class="card card-hero">
          <div class="rate-title-row">
            <div class="rate-title-left">
              <div class="rate-title-main">
                <div class="rate-icon icon-calc"></div>
                <span>åŒ¯ç‡è©¦ç®— Â· KRW â‡„ TWD</span>
              </div>
              <div class="rate-subtitle">TODAY EXCHANGE SNAPSHOT</div>
            </div>

            <!-- æ¨¡å¼åˆ‡æ› -->
            <label class="rate-switch">
              <input type="checkbox" id="rateModeToggle" />
              <span class="rate-switch-track">
                <span class="rate-switch-thumb"></span>
                <span
                  class="rate-switch-label rate-switch-label-left"
                  id="labelLive"
                >å³æ™‚</span>
                <span
                  class="rate-switch-label rate-switch-label-right"
                  id="labelCustom"
                >è‡ªè¨‚</span>
              </span>
            </label>
          </div>

          <div class="custom-rate-row" id="customRateRow">
            <span>è‡ªè¨‚åŒ¯ç‡</span>
            <span>1 TWD â‰ˆ</span>
            <input
              id="customRateInput"
              type="number"
              step="0.01"
              placeholder="45.00"
            />
            <span>KRW</span>
          </div>

          <div class="rate-body">
            <div class="rate-col">
              <div class="rate-label">KRW Â· éŸ“å¹£</div>
              <input
                id="krwInput"
                class="rate-input-field"
                type="number"
                inputmode="decimal"
                placeholder="0"
              />
              <div class="rate-line"></div>
            </div>

            <div class="rate-equal">ï¼</div>

            <div class="rate-col" style="text-align:right;">
              <div class="rate-label">TWD Â· å°å¹£</div>
              <input
                id="twdInput"
                class="rate-input-field rate-input-right"
                type="number"
                inputmode="decimal"
                placeholder="0"
              />
              <div class="rate-line"></div>
            </div>
          </div>

          <div class="rate-footer">
            <div class="sub-text" id="rateText">åŒ¯ç‡è¼‰å…¥ä¸­â€¦</div>
            <button class="pill-outline small" id="refreshRateBtn">
              åŒ¯ç‡åˆ·æ–°
            </button>
          </div>
        </div>

        <!-- ä¸€é€±å¤©æ°£ï¼ˆæ”¹ç‚ºå³æ™‚è³‡æ–™ï¼‰ -->
        <div class="card" id="weatherCard">
          <div class="weather-header">
            <div class="weather-header-title">Seoul Â· Weekly Outlook</div>
            <div class="sub-text" id="weatherLocationText">è³‡æ–™è¼‰å…¥ä¸­â€¦</div>
          </div>
          <div class="weather-row" id="weatherRow">
            <div class="sub-text" style="flex:1;text-align:center;">
              å–å¾—å¤©æ°£è³‡æ–™ä¸­â€¦
            </div>
          </div>
        </div>

        <!-- å…¥å¢ƒ / è‡ªé§• segment -->
        <div class="segment-wrap">
          <div class="segment">
            <button class="segment-btn active">
              âœˆï¸ å…¥å¢ƒæ¨¡å¼
            </button>
            <button class="segment-btn">
              ğŸš— è‡ªé§•æ¨¡å¼
            </button>
          </div>
        </div>

        <!-- Visit Japan Web å¡ï¼ˆç¤ºæ„å€ï¼‰ -->
        <div class="card">
          <div class="vjw-header">
            <div class="vjw-left">
              <div class="qr-box">â–£</div>
              <div>Visit Japan Web</div>
            </div>
            <div class="vjw-members">
              <div class="vjw-pill">å°æœ±</div>
              <div class="vjw-pill active">ç°¡å“¥</div>
            </div>
          </div>
          <div class="vjw-placeholder">
            é€™è£¡å¯ä»¥æ“ºæ”¾ QR Code æˆ–ç™»æ©Ÿå‰å¿…å‚™æˆªåœ–ï¼Œç•¶æˆä½ çš„æ—…è¡Œå…¥å£ã€‚
          </div>
        </div>
      </section>

      <!-- è¡Œç¨‹ Page -->
      <section class="page" id="page-trip">
        <div class="section-title">Daily Plan</div>
        <div class="date-strip">
          <button class="date-pill active">D1 Â· 11/20</button>
          <button class="date-pill">D2 Â· 11/21</button>
          <button class="date-pill">D3 Â· 11/22</button>
          <button class="date-pill">D4 Â· 11/23</button>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:baseline;">
            <div>
              <div class="sub-text">09:00 â€“ 11:00</div>
              <div>å—å±±å¡”æ•£æ­¥ Â· Morning Walk</div>
            </div>
            <div class="sub-text">é¦–çˆ¾å¸‚ä¸­å€</div>
          </div>
          <div class="tag-row">
            <div class="tag">è‡ªé§•</div>
            <div class="tag">å« MapCode</div>
            <div class="tag">æ‹ç…§æ™¯é»</div>
          </div>
          <div class="card-actions-row">
            <button class="btn-primary">ä¸€éµå°èˆª</button>
            <button class="btn-ghost">æé†’ï¼šå‡ºç™¼å‰ 5 åˆ†é˜</button>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:baseline;">
            <div>
              <div class="sub-text">12:30 â€“ 14:00</div>
              <div>æ¢¨æ³°é™¢åˆé¤ Â· éŸ“ç‰›çƒ¤è‚‰</div>
            </div>
            <div class="sub-text">Line 6 Â· Itaewon</div>
          </div>
          <div class="tag-row">
            <div class="tag">åœ°éµ</div>
            <div class="tag">ç¾é£Ÿ</div>
          </div>
          <div class="card-actions-row">
            <button class="btn-primary">ä¸€éµå°èˆª</button>
            <button class="btn-ghost">æé†’ï¼šå‡ºç™¼å‰ 10 åˆ†é˜</button>
          </div>
        </div>
      </section>

      <!-- è¨˜å¸³ Page -->
      <section class="page" id="page-money">
        <div class="section-title">Expense Log</div>
        <div class="card">
          <div class="sub-text">åˆ†é¡ Category</div>
          <div class="chip-grid">
            <div class="chip-icon active">ğŸ™ é¤é£²</div>
            <div class="chip-icon">ğŸš† äº¤é€š</div>
            <div class="chip-icon">ğŸ›ï¸ è³¼ç‰©</div>
            <div class="chip-icon">ğŸŸï¸ é–€ç¥¨</div>
            <div class="chip-icon">ğŸ¨ ä½å®¿</div>
            <div class="chip-icon">â‹¯ å…¶ä»–</div>
          </div>

          <div class="two-col">
            <div style="flex: 1;">
              <div class="input-label">å¹£åˆ¥</div>
              <div class="pill-row">
                <button class="pill-outline active">KRW</button>
                <button class="pill-outline">TWD</button>
                <button class="pill-outline">JPY</button>
              </div>
            </div>
            <div style="flex: 1;">
              <div class="input-label">ä»˜æ¬¾äºº</div>
              <div class="pill-row">
                <button class="pill-outline active">æˆ‘</button>
                <button class="pill-outline">ç”·å‹</button>
                <button class="pill-outline">å…¬è²»</button>
              </div>
            </div>
          </div>

          <div class="input-row">
            <div class="input-label">é‡‘é¡</div>
            <input class="input-field" placeholder="è¼¸å…¥é‡‘é¡ï¼ˆä¾‹å¦‚ 48,000ï¼‰" />
            <div class="sub-text">ç´„ NT$ 1,176ï¼ˆä¾ç•¶ä¸‹åŒ¯ç‡ä¼°ç®—ï¼‰</div>
          </div>

          <div class="input-row">
            <div class="input-label">å‚™è¨»</div>
            <input class="input-field" placeholder="ä¾‹å¦‚ï¼šå¼˜å¤§çƒ¤è‚‰ Â· åˆé¤" />
          </div>

          <div class="input-row">
            <div class="input-label">åˆ†æ”¤æ–¹å¼</div>
            <div class="two-col">
              <button class="pill-outline active" style="flex: 1;">å…±åŒåˆ†æ”¤</button>
              <button class="pill-outline" style="flex: 1;">å€‹äººè‡ªä»˜</button>
            </div>
          </div>

          <div class="summary-bar">
            <span>ğŸ§®</span>
            ä»Šæ—¥ç´¯è¨ˆï¼šç°¡å“¥éœ€çµ¦ä½  â‚© 35,810ï¼ˆå¹³åˆ†å¾Œå·®é¡ï¼‰
          </div>

          <div style="margin-top: 14px; text-align: right;">
            <button class="btn-primary">æ–°å¢è¨˜éŒ„</button>
          </div>
        </div>
      </section>

      <!-- æ¸…å–® Page -->
      <section class="page" id="page-list">
        <div class="section-title">Packing Checklist</div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center;">
            <div>
              <div>æ‰“åŒ…å®Œæˆåº¦ 72%</div>
              <div class="sub-text">é‚„æœ‰ 6 ä»¶ç‰©å“å°šæœªå‹¾é¸</div>
            </div>
            <button class="pill-outline small">é‡æ–°æ•´ç†</button>
          </div>
          <div style="margin-top:10px;">
            <div class="progress-track">
              <div class="progress-fill"></div>
            </div>
          </div>
        </div>

        <div class="section-title">è¡Œæåˆ†é¡</div>

        <div class="card">
          <div class="group-header">
            <div>ğŸ‘• è¡£ç‰© Â· CLOTHING</div>
            <div class="sub-text">5 / 8</div>
          </div>
          <div class="checklist">
            <label class="check-item">
              <input type="checkbox" checked />
              <span>å¤–å¥—</span>
            </label>
            <label class="check-item">
              <input type="checkbox" checked />
              <span>æ›æ´—ä¸Šè¡£ 3 ä»¶</span>
            </label>
            <label class="check-item">
              <input type="checkbox" checked />
              <span>ç¡è¡£</span>
            </label>
            <label class="check-item">
              <input type="checkbox" />
              <span>å‚™ç”¨è¥ªå­</span>
            </label>
          </div>
        </div>

        <div class="card">
          <div class="group-header">
            <div>ğŸ”Œ 3C & å……é›»</div>
            <div class="sub-text">3 / 5</div>
          </div>
          <div class="checklist">
            <label class="check-item">
              <input type="checkbox" checked />
              <span>æ‰‹æ©Ÿå……é›»ç·š</span>
            </label>
            <label class="check-item">
              <input type="checkbox" checked />
              <span>è¡Œå‹•é›»æº</span>
            </label>
            <label class="check-item">
              <input type="checkbox" />
              <span>ç›¸æ©Ÿé›»æ± </span>
            </label>
            <label class="check-item">
              <input type="checkbox" checked />
              <span>è½‰æ¥é ­</span>
            </label>
          </div>
        </div>
      </section>
    </main>

    <!-- åº•éƒ¨åœ“è§’ Navï¼ˆç›®å‰åªæ˜¯è¦–è¦ºï¼Œå’Œä¸Šæ–¹ tab åŒæ­¥ï¼‰ -->
    <div class="bottom-nav-wrap">
      <div class="bottom-nav">
        <div class="bottom-item active" data-tab-bottom="home">
          <div class="bottom-item-icon">ğŸ </div>
          <div>å®¶</div>
        </div>
        <div class="bottom-item" data-tab-bottom="trip">
          <div class="bottom-item-icon">ğŸ—ºï¸</div>
          <div>è¡Œç¨‹</div>
        </div>
        <div class="bottom-item" data-tab-bottom="money">
          <div class="bottom-item-icon">ğŸ’°</div>
          <div>è¨˜å¸³</div>
        </div>
        <div class="bottom-item" data-tab-bottom="list">
          <div class="bottom-item-icon">ğŸ§³</div>
          <div>æ¸…å–®</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ä¸Šæ–¹åˆ†é  + åº•éƒ¨ nav åŒæ­¥
    const tabs = document.querySelectorAll(".top-tab");
    const bottomItems = document.querySelectorAll(".bottom-item");
    const pages = {
      home: document.getElementById("page-home"),
      trip: document.getElementById("page-trip"),
      money: document.getElementById("page-money"),
      list: document.getElementById("page-list"),
    };

    function activateTab(key) {
      tabs.forEach((t) => {
        t.classList.toggle("active", t.dataset.tab === key);
      });
      bottomItems.forEach((b) => {
        b.classList.toggle("active", b.dataset.tabBottom === key);
      });
      Object.entries(pages).forEach(([k, p]) => {
        p.classList.toggle("active", k === key);
      });
    }

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => activateTab(tab.dataset.tab));
    });

    bottomItems.forEach((item) => {
      item.addEventListener("click", () => activateTab(item.dataset.tabBottom));
    });

    // ä¸»é¡Œåˆ‡æ›ï¼šåŸè‰² â†’ Lilac â†’ Midnight
    const themeBtn = document.getElementById("themeBtn");
    const themes = ["default", "lilac", "midnight"];
    let themeIndex = 0;

    function applyTheme() {
      const key = themes[themeIndex];
      if (key === "default") {
        document.documentElement.removeAttribute("data-theme");
        themeBtn.innerHTML = `<span>ğŸ¨</span> ORIGINAL`;
      } else if (key === "lilac") {
        document.documentElement.setAttribute("data-theme", "lilac");
        themeBtn.innerHTML = `<span>ğŸŒˆ</span> LILAC`;
      } else {
        document.documentElement.setAttribute("data-theme", "midnight");
        themeBtn.innerHTML = `<span>ğŸŒ™</span> MIDNIGHT`;
      }
    }
    applyTheme();
    themeBtn.addEventListener("click", () => {
      themeIndex = (themeIndex + 1) % themes.length;
      applyTheme();
    });

    // åŒ¯ç‡ç›¸é—œ
    const krwInput = document.getElementById("krwInput");
    const twdInput = document.getElementById("twdInput");
    const rateText = document.getElementById("rateText");
    const refreshRateBtn = document.getElementById("refreshRateBtn");
    const customRateRow = document.getElementById("customRateRow");
    const customRateInput = document.getElementById("customRateInput");
    const rateModeToggle = document.getElementById("rateModeToggle");
    const labelLive = document.getElementById("labelLive");
    const labelCustom = document.getElementById("labelCustom");

    let liveRateTWDToKRW = 45.0; // 1 TWD â†’ ? KRW
    let rateTWDToKRW = liveRateTWDToKRW;
    let rateMode = "live";
    let isUpdating = false;

    function updateRateText() {
      if (rateMode === "live") {
        rateText.textContent =
          "ç›®å‰ä½¿ç”¨å³æ™‚åŒ¯ç‡ï¼šç´„ 1 TWD â‰ˆ " + rateTWDToKRW.toFixed(2) + " KRW";
      } else {
        rateText.textContent = "";
      }
    }

    function updateSwitchLabels() {
      if (rateMode === "live") {
        labelLive.style.opacity = 0;
        labelCustom.style.opacity = 1;
      } else {
        labelLive.style.opacity = 1;
        labelCustom.style.opacity = 0;
      }
    }

    function applyModeUI() {
      if (rateMode === "live") {
        customRateRow.style.display = "none";
        rateText.style.display = "block";
        refreshRateBtn.style.display = "inline-flex";
      } else {
        customRateRow.style.display = "flex";
        rateText.style.display = "none";
        refreshRateBtn.style.display = "none";
      }
      updateRateText();
      updateSwitchLabels();
      recalcFromInputs();
    }

    function recalcFromInputs() {
      const vK = parseFloat(krwInput.value);
      const vT = parseFloat(twdInput.value);

      if (!isNaN(vK)) {
        isUpdating = true;
        twdInput.value = (vK / rateTWDToKRW).toFixed(0);
        isUpdating = false;
      } else if (!isNaN(vT)) {
        isUpdating = true;
        krwInput.value = (vT * rateTWDToKRW).toFixed(0);
        isUpdating = false;
      }
    }

    async function fetchRate() {
      try {
        rateText.textContent = "åŒ¯ç‡è¼‰å…¥ä¸­â€¦";
        const res = await fetch("https://open.er-api.com/v6/latest/KRW");
        const data = await res.json();

        if (data && data.result === "success" && data.rates && data.rates.TWD) {
          const twdPerKrw = data.rates.TWD; // 1 KRW = twdPerKrw TWD
          liveRateTWDToKRW = 1 / twdPerKrw; // 1 TWD = ? KRW

          if (rateMode === "live") {
            rateTWDToKRW = liveRateTWDToKRW;
            updateRateText();
            recalcFromInputs();
          } else {
            rateText.textContent = "";
          }
        } else {
          rateText.textContent = "åŒ¯ç‡è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨é è¨­åŒ¯ç‡ã€‚";
        }
      } catch (e) {
        console.error(e);
        rateText.textContent = "åŒ¯ç‡è¼‰å…¥å¤±æ•—ï¼Œä½¿ç”¨é è¨­åŒ¯ç‡ã€‚";
      }
    }

    fetchRate();
    applyModeUI();

    refreshRateBtn.addEventListener("click", () => {
      fetchRate();
    });

    rateModeToggle.addEventListener("change", () => {
      rateMode = rateModeToggle.checked ? "custom" : "live";

      if (rateMode === "custom") {
        if (!customRateInput.value) {
          customRateInput.value = liveRateTWDToKRW.toFixed(2);
        }
        const v = parseFloat(customRateInput.value);
        if (!isNaN(v) && v > 0) {
          rateTWDToKRW = v;
        }
      } else {
        rateTWDToKRW = liveRateTWDToKRW;
      }

      applyModeUI();
    });

    customRateInput.addEventListener("input", () => {
      if (rateMode !== "custom") return;
      const v = parseFloat(customRateInput.value);
      if (isNaN(v) || v <= 0) return;
      rateTWDToKRW = v;
      recalcFromInputs();
    });

    krwInput.addEventListener("input", () => {
      if (isUpdating) return;
      const v = parseFloat(krwInput.value);
      if (isNaN(v)) {
        isUpdating = true;
        twdInput.value = "";
        isUpdating = false;
        return;
      }
      isUpdating = true;
      twdInput.value = (v / rateTWDToKRW).toFixed(0);
      isUpdating = false;
    });

    twdInput.addEventListener("input", () => {
      if (isUpdating) return;
      const v = parseFloat(twdInput.value);
      if (isNaN(v)) {
        isUpdating = true;
        krwInput.value = "";
        isUpdating = false;
        return;
      }
      isUpdating = true;
      krwInput.value = (v * rateTWDToKRW).toFixed(0);
      isUpdating = false;
    });

    // ---------- å¤©æ°£ï¼šæŠ“å–é¦–çˆ¾å®˜æ–¹é–‹æ”¾è³‡æ–™ (Open-Meteo) ----------
    const weatherLocationText = document.getElementById("weatherLocationText");
    const weatherRow = document.getElementById("weatherRow");

    function mapWeatherIcon(code) {
      if (code === 0) return "â˜€ï¸";                    // æ™´
      if ([1, 2].includes(code)) return "ğŸŒ¤";         // å°‘é›²
      if (code === 3) return "â›…ï¸";                   // å¤šé›²
      if ([45, 48].includes(code)) return "ğŸŒ«";       // éœ§
      if ([51, 53, 55].includes(code)) return "ğŸŒ¦";   // æ¯›æ¯›é›¨
      if ([61, 63, 65, 80, 81, 82].includes(code)) return "ğŸŒ§"; // é›¨
      if ([71, 73, 75, 77, 85, 86].includes(code)) return "â„ï¸"; // é›ª
      if ([95, 96, 99].includes(code)) return "â›ˆ";   // é›·é›¨
      return "ğŸŒ¤";
    }

    async function fetchWeather() {
      try {
        weatherLocationText.textContent = "è³‡æ–™æ›´æ–°ä¸­â€¦";
        weatherRow.innerHTML =
          `<div class="sub-text" style="flex:1;text-align:center;">å–å¾—å¤©æ°£è³‡æ–™ä¸­â€¦</div>`;

        // é¦–çˆ¾å¸‚ä¸­å¿ƒåº§æ¨™ï¼š37.57, 126.98
        const url =
          "https://api.open-meteo.com/v1/forecast?latitude=37.57&longitude=126.98&daily=weathercode,temperature_2m_max&timezone=Asia%2FSeoul";

        const res = await fetch(url);
        const data = await res.json();

        if (!data.daily || !data.daily.time) {
          throw new Error("No daily weather");
        }

        const days = data.daily;
        const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

        weatherRow.innerHTML = "";
        for (let i = 0; i < 5; i++) {
          const dateStr = days.time[i];
          const d = new Date(dateStr + "T00:00:00+09:00");
          const label = dayNames[d.getUTCDay()];
          const temp = Math.round(days.temperature_2m_max[i]);
          const code = days.weathercode[i];
          const icon = mapWeatherIcon(code);

          const dayDiv = document.createElement("div");
          dayDiv.className = "weather-day";
          dayDiv.innerHTML = `
            <div>${label}</div>
            <div class="weather-icon">${icon}</div>
            <div class="weather-temp">${temp}Â°</div>
          `;
          weatherRow.appendChild(dayDiv);
        }

        weatherLocationText.textContent = "è³‡æ–™ä¾†æºï¼šOpen-Meteo Â· Seoul / KR";
      } catch (e) {
        console.error(e);
        weatherLocationText.textContent = "å¤©æ°£è³‡æ–™è¼‰å…¥å¤±æ•—";
        weatherRow.innerHTML =
          `<div class="sub-text" style="flex:1;text-align:center;">è«‹ç¨å¾Œå†è©¦ä¸€æ¬¡</div>`;
      }
    }

    fetchWeather();

    // é–ç¸®æ”¾ï¼ˆiOS Safariï¼‰
    (function lockZoom() {
      const vp = document.querySelector('meta[name="viewport"]');
      if (vp) {
        vp.setAttribute(
          "content",
          "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
        );
      }

      document.addEventListener(
        "gesturestart",
        function (e) {
          e.preventDefault();
        },
        { passive: false }
      );
      document.addEventListener(
        "gesturechange",
        function (e) {
          e.preventDefault();
        },
        { passive: false }
      );
      document.addEventListener(
        "gestureend",
        function (e) {
          e.preventDefault();
        },
        { passive: false }
      );

      let lastTouchEnd = 0;
      document.addEventListener(
        "touchend",
        function (e) {
          const now = Date.now();
          if (now - lastTouchEnd <= 300) {
            e.preventDefault();
          }
          lastTouchEnd = now;
        },
        { passive: false }
      );
    })();
  </script>
</body>
</html>
